<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TryOnNow — The Ultimate AI Virtual Stylist</title>
  <meta name="description" content="AI-powered virtual try-on with a face-to-fashion suitability analysis." />

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
  
  <!-- Tailwind CSS & Three.js -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

  <style>
    :root {
      --bg1: #050814;
      --bg2: #0d1325;
      --text: #f3f4f6;
      --muted: #9ca3af;
      --card: rgba(17, 24, 39, 0.7);
      --line: rgba(148, 163, 184, 0.2);
      --brand1: #6366f1;
      --brand2: #14b8a6;
      --cta: #f43f5e;
    }

    html { scroll-behavior: smooth; }
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(180deg, var(--bg1), var(--bg2));
      color: var(--text);
      line-height: 1.7;
      overflow-x: hidden;
    }

    /* Reusable UI */
    .card { background: var(--card); border: 1px solid var(--line); box-shadow: 0 10px 40px rgba(0,0,0,0.25); }
    .chip { border: 1px solid var(--line); background: rgba(255,255,255,0.03); }
    .cta-btn { background: var(--cta); }
    .cta-btn:hover { filter: brightness(1.05); }
    .section-title { letter-spacing: 0.4px; }
    .modal {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      display: none; justify-content: center; align-items: center; z-index: 1000;
    }
    .modal-content { background: var(--bg2); padding: 2rem; border-radius: 1.5rem; max-width: 95%; width: 1100px; position: relative; }
    .glass { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.08); backdrop-filter: blur(8px); }
    .gradient-text { background: linear-gradient(90deg, var(--brand1), var(--brand2)); -webkit-background-clip: text; background-clip: text; color: transparent; }
    .loading-spinner { border: 4px solid rgba(0, 0, 0, 0.1); border-left-color: #f43f5e; border-radius: 50%; width: 24px; height: 24px; animation: spin 1s linear infinite; }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

    /* FAQ */
    .faq-answer { overflow: hidden; max-height: 0; opacity: 0; transition: max-height 300ms ease, opacity 300ms ease; }
    .faq-answer.open { max-height: 320px; opacity: 1; }

    /* --- NEW: iOS 3D Card tilt --- */
    .tilt-card {
      transform-style: preserve-3d; transition: transform 150ms ease, box-shadow 150ms ease;
      box-shadow: 0 10px 30px rgba(0,0,0,.35); border:1px solid var(--line);
    }
    .tilt-card .layer { transform: translateZ(30px); }
    .tilt-card .chip { transform: translateZ(50px); }

    /* --- NEW: Social Stylist canvas area --- */
    #composer-stage { background:#0b1226; border:1px dashed rgba(255,255,255,.15); }
    .handle { position:absolute; width:14px; height:14px; border-radius:50%; background:#f43f5e; border:2px solid #fff; cursor:nwse-resize; }

    /* Mobile */
    @media (max-width: 640px) { .container { padding-left: 1rem; padding-right: 1rem; } }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="fixed top-0 left-0 w-full z-50 bg-gray-900 bg-opacity-70 backdrop-blur-md border-b border-gray-700">
    <div class="container mx-auto px-4 py-4 flex justify-between items-center">
      <a href="#" class="text-2xl font-bold tracking-wide text-white">TryOnNow</a>
      <nav class="hidden md:flex items-center space-x-8">
        <a href="#why" class="text-gray-400 hover:text-white transition-colors duration-300">Why</a>
        <a href="#ai-stylist" class="text-gray-400 hover:text-white transition-colors duration-300">AI Stylist</a>
        <a href="#how" class="text-gray-400 hover:text-white transition-colors duration-300">How</a>
        <a href="#social-stylist" id="nav-social-stylist" class="text-gray-100 font-semibold hover:text-white transition-colors duration-300">Social Stylist</a>
        <a href="#fit3d" class="text-gray-400 hover:text-white transition-colors duration-300">3D Fit</a>
        <a href="#likes" class="text-gray-400 hover:text-white transition-colors duration-300">People Love</a>
        <a href="#apps" class="text-gray-400 hover:text-white transition-colors duration-300">Apps</a>
        <a href="#reviews" class="text-gray-400 hover:text-white transition-colors duration-300">Reviews</a>
        <a href="#founder" class="text-gray-400 hover:text-white transition-colors duration-300">Founder</a>
        <a href="#twinning-feature" class="text-gray-400 hover:text-white transition-colors duration-300">Twinning</a>
        <a href="#faq" class="text-gray-400 hover:text-white transition-colors duration-300">FAQ</a>
        <a href="#contact" class="text-gray-400 hover:text-white transition-colors duration-300">Contact</a>
      </nav>
      <button id="open-mobile-menu" class="md:hidden text-white focus:outline-none" aria-label="Open Menu">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
      </button>
    </div>
    <!-- Mobile Menu -->
    <div id="mobile-menu" class="md:hidden hidden bg-gray-900 bg-opacity-90">
      <div class="container mx-auto px-4 py-4 space-y-2">
        <a href="#why" class="block py-2 text-gray-300">Why</a>
        <a href="#ai-stylist" class="block py-2 text-gray-300">AI Stylist</a>
        <a href="#how" class="block py-2 text-gray-300">How</a>
        <a href="#social-stylist" class="block py-2 text-gray-300">Social Stylist</a>
        <a href="#fit3d" class="block py-2 text-gray-300">3D Fit</a>
        <a href="#likes" class="block py-2 text-gray-300">People Love</a>
        <a href="#apps" class="block py-2 text-gray-300">Apps</a>
        <a href="#reviews" class="block py-2 text-gray-300">Reviews</a>
        <a href="#founder" class="block py-2 text-gray-300">Founder</a>
        <a href="#twinning-feature" class="block py-2 text-gray-300">Twinning</a>
        <a href="#faq" class="block py-2 text-gray-300">FAQ</a>
        <a href="#contact" class="block py-2 text-gray-300">Contact</a>
      </div>
    </div>
  </header>

  <!-- HERO (UPDATED: no stock image; moving colored balls background) -->
  <section id="home" class="pt-28 pb-16 relative overflow-hidden">
    <!-- NEW: balls canvas -->
    <canvas id="balls-bg" class="absolute inset-0 w-full h-full"></canvas>
    <div class="absolute -inset-10 bg-gradient-to-tr from-indigo-500/20 to-teal-400/20 blur-3xl"></div>
    <div class="container mx-auto px-4 grid md:grid-cols-2 gap-12 items-center relative">
      <div>
        <h1 class="text-4xl sm:text-5xl font-extrabold mb-4 leading-tight">
          Dress with <span class="gradient-text">Confidence</span> — Powered by AI
        </h1>
        <p class="text-gray-300 text-lg mb-8">Upload a photo, pick an outfit, generate your look, and share on social — no shopping required.</p>
        <div class="flex flex-wrap gap-3">
          <a href="#ai-stylist" class="px-6 py-3 rounded-lg cta-btn text-white font-semibold">Try AI Stylist</a>
          <button id="open-stylist-button" class="px-6 py-3 rounded-lg chip text-white font-semibold">Open Social Stylist</button>
        </div>
      </div>
      <!-- RIGHT side intentionally empty (no images) -->
      <div class="hidden md:block"></div>
    </div>
  </section>

  <!-- Why -->
  <section id="why" class="py-16">
    <div class="container mx-auto px-4">
      <h2 class="section-title text-3xl sm:text-4xl font-bold text-center mb-12">Why TryOnNow?</h2>
      <div class="grid md:grid-cols-3 gap-8">
        <div class="card p-6 rounded-2xl">
          <p class="text-xl font-semibold">Face-to-Fashion Fit</p>
          <p class="text-gray-400">Upload your face and add an outfit image; generate a shareable look instantly.</p>
        </div>
        <div class="card p-6 rounded-2xl">
          <p class="text-xl font-semibold">Instant Share</p>
          <p class="text-gray-400">Post your look straight to socials or download it. No shopping flow.</p>
        </div>
        <div class="card p-6 rounded-2xl">
          <p class="text-xl font-semibold">3D Fit Preview</p>
          <p class="text-gray-400">See approximate drape/sizing on a 3D mannequin and compare sizes across brands.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- AI Stylist -->
  <section id="ai-stylist" class="py-16">
    <div class="container mx-auto px-4 text-center">
      <h2 class="text-3xl sm:text-4xl font-bold mb-6">Personal AI Stylist</h2>
      <p class="text-lg text-gray-400 mb-8 max-w-2xl mx-auto">
        Not sure what to wear? Get suggestions by uploading a photo plus climate & occasion. When ready to share, open Social Stylist.
      </p>
      <div class="max-w-xl mx-auto card p-8 rounded-3xl space-y-6">
        <div class="space-y-4 text-left">
          <div>
            <label for="ai-stylist-file-upload" class="block text-white font-semibold mb-2">1. Upload a Photo</label>
            <input type="file" id="ai-stylist-file-upload" accept="image/*" class="w-full file:px-4 file:py-2 file:rounded-lg file:border file:border-gray-600 file:bg-gray-800 file:text-white file:cursor-pointer" />
          </div>
          <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
            <div>
              <label class="block text-white font-semibold mb-2">Climate</label>
              <select id="climate-select" class="w-full bg-gray-900 border border-gray-700 rounded-lg p-3">
                <option>Hot & Humid</option>
                <option>Warm</option>
                <option>Mild</option>
                <option>Cool</option>
                <option>Cold</option>
              </select>
            </div>
            <div>
              <label class="block text-white font-semibold mb-2">Occasion</label>
              <select id="occasion-select" class="w-full bg-gray-900 border border-gray-700 rounded-lg p-3">
                <option>Casual Day Out</option>
                <option>Office</option>
                <option>Party</option>
                <option>Wedding</option>
                <option>Gym</option>
              </select>
            </div>
            <div>
              <label class="block text-white font-semibold mb-2">Style</label>
              <select id="style-select" class="w-full bg-gray-900 border border-gray-700 rounded-lg p-3">
                <option>Minimal</option>
                <option>Streetwear</option>
                <option>Classic</option>
                <option>Boho</option>
                <option>Luxury</option>
              </select>
            </div>
          </div>
        </div>
        <button id="open-stylist-button-2" class="px-6 py-3 rounded-lg chip text-white font-semibold w-full">Open Social Stylist</button>
      </div>
    </div>
  </section>

  <!-- How it works -->
  <section id="how" class="py-16 bg-gray-800 bg-opacity-30">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl sm:text-4xl font-bold text-center mb-12">How it Works</h2>
      <div class="grid md:grid-cols-3 gap-8">
        <div class="card p-6 rounded-2xl"><p class="text-xl font-semibold">1. Upload</p><p class="text-gray-400">Upload your face + outfit image.</p></div>
        <div class="card p-6 rounded-2xl"><p class="text-xl font-semibold">2. Arrange</p><p class="text-gray-400">Drag/resize your face over the outfit. Pick background & pose.</p></div>
        <div class="card p-6 rounded-2xl"><p class="text-xl font-semibold">3. Share</p><p class="text-gray-400">Generate the final image, download, or post to socials.</p></div>
      </div>
    </div>
  </section>

  <!-- Social Stylist Modal (REWRITTEN) -->
  <div id="social-stylist-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="social-stylist-title">
    <div class="modal-content">
      <button id="close-modal-button" class="absolute top-4 right-4 text-white text-3xl font-bold leading-none" aria-label="Close">&times;</button>
      <h3 id="social-stylist-title" class="text-3xl font-bold text-center">Social Stylist — Create & Share Your Look</h3>
      <p class="text-center text-gray-400 mt-2 mb-6">Upload your <strong>face</strong> and an <strong>outfit</strong> image. Arrange, generate, and share. No shopping.</p>

      <div class="flex flex-col lg:flex-row gap-8">
        <!-- Controls -->
        <div class="flex-1 space-y-5">
          <div>
            <label for="face-input" class="block text-white font-semibold mb-2">1) Upload Face</label>
            <input type="file" id="face-input" accept="image/*" class="w-full file:px-4 file:py-2 file:rounded-lg file:border file:border-gray-600 file:bg-gray-800 file:text-white file:cursor-pointer">
          </div>
          <div>
            <label for="outfit-input" class="block text-white font-semibold mb-2">2) Upload Outfit (top/fit)</label>
            <input type="file" id="outfit-input" accept="image/*" class="w-full file:px-4 file:py-2 file:rounded-lg file:border file:border-gray-600 file:bg-gray-800 file:text-white file:cursor-pointer">
          </div>
          <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
            <div>
              <label class="block text-white font-semibold mb-2">Background</label>
              <select id="modal-background-select" class="w-full bg-gray-900 border border-gray-700 rounded-lg p-3">
                <option>Studio</option>
                <option>Street</option>
                <option>Beach</option>
                <option>Office</option>
                <option>Garden</option>
              </select>
            </div>
            <div>
              <label class="block text-white font-semibold mb-2">Pose</label>
              <select id="modal-pose-select" class="w-full bg-gray-900 border border-gray-700 rounded-lg p-3">
                <option>Casual Standing</option>
                <option>Walking</option>
                <option>Sitting</option>
                <option>Leaning</option>
                <option>Turning</option>
              </select>
            </div>
            <div>
              <label class="block text-white font-semibold mb-2">Face Mask</label>
              <select id="modal-mask-select" class="w-full bg-gray-900 border border-gray-700 rounded-lg p-3">
                <option>Circle</option>
                <option>Oval</option>
                <option>Square</option>
              </select>
            </div>
          </div>
          <div class="flex gap-3">
            <button id="generate-button" class="cta-btn text-white py-3 px-6 rounded-lg font-bold w-full">Generate Image</button>
          </div>
          <div class="flex gap-3">
            <button id="download-btn" class="px-4 py-2 rounded-lg chip text-white w-full">Download</button>
            <button id="share-btn" class="px-4 py-2 rounded-lg chip text-white w-full">Share</button>
          </div>
          <p class="text-xs text-gray-500">Tip: drag your face on the canvas; use mouse wheel / pinch to resize.</p>
        </div>

        <!-- Composer / Preview -->
        <div class="flex-1">
          <h4 class="text-xl font-semibold mb-3">Preview</h4>
          <div class="relative rounded-xl overflow-hidden border border-gray-700">
            <canvas id="composer-stage" width="600" height="800" class="w-full h-[500px]"></canvas>
            <div id="loading-message" class="hidden absolute inset-0 flex items-center justify-center bg-black/40">
              <div class="loading-spinner"></div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- 3D FIT -->
  <section id="fit3d" class="py-16">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl sm:text-4xl font-bold text-center mb-12">Experience 3D Fit & Sizing Intelligence</h2>
      <div class="grid md:grid-cols-2 gap-12 items-center">
        <div class="card p-8 rounded-3xl">
          <p class="text-2xl font-semibold text-white mb-4">AI Fit Report</p>
          <div class="space-y-4">
            <div class="text-lg text-gray-300"><span class="font-bold text-white">Shoulder Fit:</span> <span class="text-indigo-400">Relaxed</span></div>
            <div class="text-lg text-gray-300"><span class="font-bold text-white">Chest Fit:</span> <span class="text-indigo-400">True to Size</span></div>
            <div class="text-lg text-gray-300"><span class="font-bold text-white">Length:</span> <span class="text-indigo-400">Regular</span></div>
            <div class="text-lg text-gray-300"><span class="font-bold text-white">Size Suggestion:</span> <span class="text-indigo-400">Medium</span></div>
          </div>
        </div>
        <div class="relative">
          <canvas id="mannequin-canvas" class="w-full h-[400px] rounded-3xl border border-gray-700"></canvas>
          <div class="absolute inset-0 pointer-events-none rounded-3xl" style="background: radial-gradient( circle at 30% 20%, rgba(99,102,241,0.1), transparent 40%), radial-gradient( circle at 70% 80%, rgba(20,184,166,0.12), transparent 40% )"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- People Love (Likes & Streak) -->
  <section id="likes" class="py-16 bg-gray-800 bg-opacity-30">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl sm:text-4xl font-bold text-center mb-8">People Love</h2>
      <div class="max-w-3xl mx-auto grid gap-6 md:grid-cols-3">
        <div class="card p-6 rounded-2xl text-center">
          <p class="text-sm text-gray-400 mb-1">Likes Today</p>
          <p id="likes-today" class="text-4xl font-bold">0</p>
          <button id="like-btn" class="mt-4 px-4 py-2 rounded-lg cta-btn text-white w-full">❤️ Like this</button>
          <p class="text-xs text-gray-500 mt-2">(resets at midnight)</p>
        </div>
        <div class="card p-6 rounded-2xl text-center">
          <p class="text-sm text-gray-400 mb-1">Current Streak</p>
          <p id="current-streak" class="text-4xl font-bold">0</p>
          <p class="text-xs text-gray-500 mt-2">consecutive days with likes</p>
        </div>
        <div class="card p-6 rounded-2xl text-center">
          <p class="text-sm text-gray-400 mb-1">Best Streak</p>
          <p id="best-streak" class="text-4xl font-bold">0</p>
          <button id="reset-stats" class="mt-4 px-4 py-2 rounded-lg chip text-white w-full">Reset (debug)</button>
        </div>
      </div>
      <p class="text-center text-gray-400 mt-6 text-sm">This demo stores your streak locally. Hook it to your backend later for global counts.</p>
    </div>
  </section>

  <!-- Apps -->
  <section id="apps" class="py-16">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl sm:text-4xl font-bold text-center mb-12">Get the Apps</h2>
      <div class="grid md:grid-cols-2 gap-6 max-w-3xl mx-auto">
        <!-- iOS card with 3D tilt (no images) -->
        <a class="card p-0 rounded-2xl block" href="#">
          <div id="ios-tilt" class="tilt-card rounded-2xl p-6 bg-gray-900">
            <div class="layer">
              <div class="flex items-center justify-between mb-3">
                <div class="text-sm text-gray-400">iOS Preview</div>
                <div class="chip px-3 py-1 rounded-full text-xs text-white/80">3D UI</div>
              </div>
              <div class="bg-gradient-to-br from-indigo-500/30 to-teal-400/30 rounded-2xl p-5 border border-white/10">
                <div class="text-5xl font-bold mb-2">9:41</div>
                <div class="text-sm text-gray-300">Monday, June 12</div>
                <div class="mt-6 grid grid-cols-3 gap-3">
                  <div class="chip p-3 rounded-xl text-center">Try</div>
                  <div class="chip p-3 rounded-xl text-center">Share</div>
                  <div class="chip p-3 rounded-xl text-center">Save</div>
                </div>
              </div>
              <p class="mt-4 text-gray-400 text-sm">Optimized for iPhone — no image assets used.</p>
            </div>
          </div>
        </a>
        <!-- Android: keep simple (no logos) -->
        <a class="card p-5 rounded-2xl flex items-center justify-between" href="#">
          <div>
            <p class="font-semibold">Android</p>
            <p class="text-gray-400 text-sm">Works great on Pixel & Samsung</p>
          </div>
          <div class="chip px-3 py-1 rounded-full">APK</div>
        </a>
      </div>
    </div>
  </section>

  <!-- Reviews -->
  <section id="reviews" class="py-16 bg-gray-800 bg-opacity-30">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl sm:text-4xl font-bold text-center mb-12">What People Say</h2>
      <div class="grid md:grid-cols-3 gap-6">
        <div class="card p-6 rounded-2xl"><p class="text-gray-300">“I finally know what to wear to weddings without spam-texting friends.”</p><p class="mt-3 text-sm text-gray-400">— Aanya R.</p></div>
        <div class="card p-6 rounded-2xl"><p class="text-gray-300">“The 3D mannequin sizing is scary-accurate for jackets.”</p><p class="mt-3 text-sm text-gray-400">— Kiran M.</p></div>
        <div class="card p-6 rounded-2xl"><p class="text-gray-300">“Shared my look on Instagram straight from the modal.”</p><p class="mt-3 text-sm text-gray-400">— Zoya D.</p></div>
      </div>
    </div>
  </section>

  <!-- Founder -->
  <section id="founder" class="py-16">
    <div class="container mx-auto px-4 max-w-3xl">
      <div class="card p-8 rounded-3xl">
        <h3 class="text-3xl font-bold mb-4">Founder</h3>
        <p class="text-lg text-gray-300"><span class="font-semibold text-white">Ravi Kiran Kanapala</span> — MBA postgraduate; enthusiastic in business &amp; style. He created TryOnNow driven by that passion and vision.</p>
      </div>
    </div>
  </section>

  <!-- Twinning Feature (kept) -->
  <section id="twinning-feature" class="py-16 bg-gray-800 bg-opacity-30">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl sm:text-4xl font-bold text-center mb-12">Twinning — Match Your Partner’s Look</h2>
      <div class="grid md:grid-cols-2 gap-10 items-start">
        <div class="space-y-6">
          <div>
            <label class="block text-white font-semibold mb-2">Twinning Style</label>
            <select id="twinning-style" class="w-full bg-gray-900 border border-gray-700 rounded-lg p-3">
              <option>Same Outfit</option>
              <option>Same Color</option>
              <option>Complementary Colors</option>
              <option>Contrast Vibes</option>
            </select>
          </div>
          <div class="flex gap-3">
            <button class="twinning-btn px-4 py-2 rounded-lg bg-indigo-500 hover:bg-indigo-600 text-white">Classy</button>
            <button class="twinning-btn px-4 py-2 rounded-lg bg-gray-700 hover:bg-gray-600 text-white">Casual</button>
            <button class="twinning-btn px-4 py-2 rounded-lg bg-gray-700 hover:bg-gray-600 text-white">Fusion</button>
          </div>
          <button id="find-twinning-btn" data-endpoint="" class="cta-btn text-white py-3 px-6 rounded-lg font-bold w-full">
            <span id="twinning-button-text">Find Twinning Looks</span>
            <span id="twinning-loading-indicator" class="hidden ml-3 inline-flex items-center"><span class="loading-spinner"></span></span>
          </button>
        </div>
        <div class="grid grid-cols-2 gap-4">
          <img id="person1-outfit" src="https://placehold.co/400x600/6366f1/white?text=Your+Look" alt="Your look" class="rounded-xl border border-gray-700" loading="lazy">
          <img id="person2-outfit" src="https://placehold.co/400x600/f43f5e/white?text=Partner's+Look" alt="Partner's look" class="rounded-xl border border-gray-700" loading="lazy">
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ -->
  <section id="faq" class="py-16 bg-gray-800 bg-opacity-30">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl sm:text-4xl font-bold text-center mb-12">Frequently Asked Questions</h2>
      <div class="max-w-3xl mx-auto space-y-4">
        <div class="card p-6 rounded-xl cursor-pointer">
          <h4 class="text-lg font-semibold text-white">How accurate are the try-on images?</h4>
          <p class="mt-2 text-gray-400 faq-answer">This demo focuses on vibe and positioning. You can plug your AI later for realism.</p>
        </div>
        <div class="card p-6 rounded-xl cursor-pointer">
          <h4 class="text-lg font-semibold text-white">Is my data private?</h4>
          <p class="mt-2 text-gray-400 faq-answer">Photos stay on your device in this demo; nothing is uploaded unless you connect a backend.</p>
        </div>
        <div class="card p-6 rounded-xl cursor-pointer">
          <h4 class="text-lg font-semibold text-white">Do I need special hardware?</h4>
          <p class="mt-2 text-gray-400 faq-answer">No. It works on modern phones and laptops with a camera and a stable connection.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Contact -->
  <section id="contact" class="py-16">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl sm:text-4xl font-bold text-center mb-8">Contact Us</h2>
      <div class="max-w-xl mx-auto card p-8 rounded-3xl">
        <form id="contact-form" class="mt-8 space-y-4" method="POST" action="/api/contact" novalidate>
          <input id="contact-name" name="name" type="text" placeholder="Your Name" autocomplete="name" aria-label="Your Name" class="w-full px-4 py-3 rounded-lg bg-gray-900 border border-gray-700 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500" required />
          <input id="contact-email" name="email" type="email" placeholder="Your Email" autocomplete="email" aria-label="Your Email" class="w-full px-4 py-3 rounded-lg bg-gray-900 border border-gray-700 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500" required />
          <textarea id="contact-message" name="message" placeholder="Your Message" aria-label="Your Message" rows="4" class="w-full px-4 py-3 rounded-lg bg-gray-900 border border-gray-700 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500" required></textarea>
          <div id="contact-status" class="text-sm text-gray-300" aria-live="polite"></div>
          <button type="submit" class="w-full cta-btn text-white py-3 rounded-lg font-bold">Send Message</button>
        </form>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="py-10 border-t border-gray-800">
    <div class="container mx-auto px-4 text-center text-gray-400">
      <p>© <span id="year"></span> TryOnNow. All rights reserved.</p>
    </div>
  </footer>

  <script>
    // Header interactions
    const mobileMenuButton = document.getElementById('open-mobile-menu');
    const mobileMenu = document.getElementById('mobile-menu');
    const socialStylistModal = document.getElementById('social-stylist-modal');
    const openStylistButtons = [document.getElementById('open-stylist-button'), document.getElementById('open-stylist-button-2'), document.getElementById('nav-social-stylist')].filter(Boolean);
    const closeModalButton = document.getElementById('close-modal-button');

    function hideMobileMenu() { mobileMenu.classList.add('hidden'); }
    mobileMenuButton.addEventListener('click', () => { mobileMenu.classList.toggle('hidden'); });

    // Modal open/close
    openStylistButtons.forEach(btn => btn.addEventListener('click', (e) => { e.preventDefault(); socialStylistModal.classList.add('open'); }));
    closeModalButton.addEventListener('click', () => { socialStylistModal.classList.remove('open'); });
    window.addEventListener('click', (e) => { if (e.target === socialStylistModal) socialStylistModal.classList.remove('open'); });

    // Smooth anchor scroll + close mobile menu
    document.querySelectorAll('a[href^=\"#\"]').forEach(link => {
      link.addEventListener('click', function(e) {
        const t = document.querySelector(this.getAttribute('href'));
        if (!t) return;
        e.preventDefault();
        t.scrollIntoView({ behavior: 'smooth' });
        hideMobileMenu();
      });
    });

    // --- NEW: Moving colored balls background (lightweight) ---
    (function ballsBG(){
      const c = document.getElementById('balls-bg');
      if(!c) return;
      const ctx = c.getContext('2d');
      let w, h, dpr = window.devicePixelRatio || 1;
      const balls = Array.from({length: 18}).map((_,i)=>({
        x: Math.random(), y: Math.random(),
        r: 60 + Math.random()*120,
        vx: (Math.random()*2-1)*0.08, vy:(Math.random()*2-1)*0.08,
        hue: (i*20 + Math.random()*40)%360
      }));
      function resize(){ w = c.clientWidth; h = c.clientHeight; c.width = w*dpr; c.height = h*dpr; ctx.scale(dpr,dpr); }
      function step(){
        ctx.clearRect(0,0,w,h);
        balls.forEach(b=>{
          b.x += b.vx/100; b.y += b.vy/100;
          if(b.x<0||b.x>1) b.vx*=-1;
          if(b.y<0||b.y>1) b.vy*=-1;
          const gx = b.x*w, gy = b.y*h;
          const grad = ctx.createRadialGradient(gx,gy,0,gx,gy,b.r);
          grad.addColorStop(0, `hsla(${b.hue},100%,60%,0.25)`);
          grad.addColorStop(1, `hsla(${b.hue},100%,60%,0)`);
          ctx.fillStyle = grad;
          ctx.beginPath(); ctx.arc(gx,gy,b.r,0,Math.PI*2); ctx.fill();
        });
        requestAnimationFrame(step);
      }
      resize(); window.addEventListener('resize', resize); step();
    })();

    // --- Three.js Mannequin (placeholder) ---
    const canvas3d = document.getElementById('mannequin-canvas');
    if (canvas3d) {
      const renderer = new THREE.WebGLRenderer({ canvas: canvas3d, antialias: true, alpha: true });
      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(45, canvas3d.clientWidth / 400, 0.1, 100);
      camera.position.z = 3;
      const geometry = new THREE.SphereGeometry(1, 16, 12);
      const material = new THREE.MeshBasicMaterial({ color: 0x6366f1, wireframe: true });
      const sphere = new THREE.Mesh(geometry, material);
      scene.add(sphere);
      const resize = () => { const w = canvas3d.clientWidth, h = 400; renderer.setSize(w, h, false); camera.aspect = w / h; camera.updateProjectionMatrix(); };
      resize(); window.addEventListener('resize', resize);
      const animate = () => { requestAnimationFrame(animate); sphere.rotation.y += 0.008; renderer.render(scene, camera); };
      animate();
    }

    // --- FAQ accordion ---
    document.querySelectorAll('#faq .card').forEach(item => {
      const answer = item.querySelector('p'); if (!answer) return;
      answer.classList.add('faq-answer'); answer.style.maxHeight = '0px'; answer.style.opacity = '0';
      item.setAttribute('role','button'); item.setAttribute('tabindex','0'); item.setAttribute('aria-expanded','false');
      const toggle = () => {
        const isOpen = answer.classList.toggle('open');
        item.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
        if (isOpen) { answer.style.maxHeight = answer.scrollHeight + 'px'; answer.style.opacity = '1'; }
        else { answer.style.maxHeight = '0px'; answer.style.opacity = '0'; }
      };
      item.addEventListener('click', toggle);
      item.addEventListener('keydown', (e)=>{ if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggle(); }});
    });

    // --- NEW: iOS 3D tilt card ---
    (function tilt(){
      const el = document.getElementById('ios-tilt'); if(!el) return;
      const bounds = () => el.getBoundingClientRect();
      el.addEventListener('mousemove', (e)=>{
        const b = bounds();
        const cx = (e.clientX - b.left) / b.width - 0.5;
        const cy = (e.clientY - b.top) / b.height - 0.5;
        el.style.transform = `perspective(800px) rotateX(${ -cy*10 }deg) rotateY(${ cx*10 }deg)`;
      });
      el.addEventListener('mouseleave', ()=>{ el.style.transform = 'perspective(800px) rotateX(0deg) rotateY(0deg)'; });
    })();

    // --- NEW: People Love (likes & streaks) ---
    (function likes(){
      const likeBtn = document.getElementById('like-btn');
      const likesTodayEl = document.getElementById('likes-today');
      const curEl = document.getElementById('current-streak');
      const bestEl = document.getElementById('best-streak');
      const resetBtn = document.getElementById('reset-stats');

      const KEY = 'tryon_likes';
      function todayStr(){ const d = new Date(); return d.toISOString().slice(0,10); }
      function load(){
        let s = localStorage.getItem(KEY);
        if(!s) return { date: todayStr(), likes: 0, current: 0, best: 0, lastActionDate: '' };
        try { return JSON.parse(s); } catch { return { date: todayStr(), likes:0, current:0, best:0, lastActionDate:'' }; }
      }
      function save(v){ localStorage.setItem(KEY, JSON.stringify(v)); }

      function refresh(){
        const s = load();
        if (s.date !== todayStr()) { s.date = todayStr(); s.likes = 0; save(s); }
        likesTodayEl.textContent = s.likes||0;
        curEl.textContent = s.current||0;
        bestEl.textContent = s.best||0;
      }

      likeBtn.addEventListener('click', ()=>{
        const s = load();
        // day change?
        if (s.date !== todayStr()) { s.date = todayStr(); s.likes = 0; }
        s.likes = (s.likes||0) + 1;
        // streak logic: If lastActionDate is yesterday or today, keep/advance; if gap >1, reset.
        const last = s.lastActionDate ? new Date(s.lastActionDate) : null;
        const now = new Date();
        const y = new Date(now); y.setDate(y.getDate()-1);
        const sameDay = last && last.toDateString() === now.toDateString();
        const isYesterday = last && last.toDateString() === y.toDateString();
        if (!last) { s.current = 1; }
        else if (sameDay) { /* keep current */ }
        else if (isYesterday) { s.current = (s.current||0) + 1; }
        else { s.current = 1; }
        s.best = Math.max(s.best||0, s.current||0);
        s.lastActionDate = now.toISOString();
        save(s); refresh();
      });

      resetBtn.addEventListener('click', ()=>{ localStorage.removeItem(KEY); refresh(); });
      refresh();
    })();

    // --- Social Stylist Composer (on-device) ---
    (function composer(){
      const stage = document.getElementById('composer-stage'); if(!stage) return;
      const ctx = stage.getContext('2d');
      const w = stage.width, h = stage.height;

      const faceInput = document.getElementById('face-input');
      const outfitInput = document.getElementById('outfit-input');
      const bgSel = document.getElementById('modal-background-select');
      const poseSel = document.getElementById('modal-pose-select');
      const maskSel = document.getElementById('modal-mask-select');
      const genBtn = document.getElementById('generate-button');
      const dlBtn = document.getElementById('download-btn');
      const shareBtn = document.getElementById('share-btn');
      const loading = document.getElementById('loading-message');

      let faceImg = null, outfitImg = null;
      let faceX = w*0.5, faceY = h*0.35, faceScale = 160; // px radius base
      let dragging = false, lastX=0, lastY=0;

      function loadFile(input, cb){
        const file = input.files && input.files[0]; if(!file) return;
        const url = URL.createObjectURL(file);
        const img = new Image(); img.onload = ()=>{ URL.revokeObjectURL(url); cb(img); }; img.src = url;
      }

      faceInput.addEventListener('change', ()=> loadFile(faceInput, img => { faceImg = img; draw(); }));
      outfitInput.addEventListener('change', ()=> loadFile(outfitInput, img => { outfitImg = img; draw(); }));
      [bgSel, poseSel, maskSel].forEach(el => el.addEventListener('change', draw));

      // Mouse interactions
      stage.addEventListener('mousedown', (e)=>{ dragging = true; lastX = e.offsetX; lastY = e.offsetY; });
      stage.addEventListener('mouseup', ()=> dragging = false);
      stage.addEventListener('mouseleave', ()=> dragging = false);
      stage.addEventListener('mousemove', (e)=>{ if(!dragging) return; const dx=e.offsetX-lastX, dy=e.offsetY-lastY; faceX+=dx; faceY+=dy; lastX=e.offsetX; lastY=e.offsetY; draw(); });
      stage.addEventListener('wheel', (e)=>{ e.preventDefault(); const delta = Math.sign(e.deltaY); faceScale = Math.max(40, faceScale - delta*12); draw(); }, { passive:false });

      function bgPaint(){
        const opt = bgSel.value;
        const grad = ctx.createLinearGradient(0,0,0,h);
        switch(opt){
          case 'Street': grad.addColorStop(0,'#09111f'); grad.addColorStop(1,'#1b2a4a'); break;
          case 'Beach': grad.addColorStop(0,'#012a4a'); grad.addColorStop(1,'#2a9d8f'); break;
          case 'Office': grad.addColorStop(0,'#0e0e10'); grad.addColorStop(1,'#2d2f3a'); break;
          case 'Garden': grad.addColorStop(0,'#0b1f12'); grad.addColorStop(1,'#1f6f3c'); break;
          default: grad.addColorStop(0,'#0b0f1a'); grad.addColorStop(1,'#111b2e');
        }
        ctx.fillStyle = grad; ctx.fillRect(0,0,w,h);
        // subtle bokeh
        for(let i=0;i<12;i++){
          const r = 20+Math.random()*60, x=Math.random()*w, y=Math.random()*h;
          const g = ctx.createRadialGradient(x,y,0,x,y,r);
          g.addColorStop(0,'rgba(255,255,255,0.06)'); g.addColorStop(1,'rgba(255,255,255,0)');
          ctx.fillStyle=g; ctx.beginPath(); ctx.arc(x,y,r,0,Math.PI*2); ctx.fill();
        }
      }

      function drawMask(image, x, y, size){
        const shape = maskSel.value;
        ctx.save();
        ctx.beginPath();
        if(shape==='Square'){ ctx.rect(x-size, y-size, size*2, size*2); }
        else if(shape==='Oval'){
          ctx.ellipse(x, y, size*0.85, size, 0, 0, Math.PI*2);
        } else {
          ctx.arc(x, y, size, 0, Math.PI*2);
        }
        ctx.closePath(); ctx.clip();
        const iw = image.width, ih = image.height;
        const scale = Math.max((size*2)/iw, (size*2)/ih);
        const drawW = iw*scale, drawH = ih*scale;
        ctx.drawImage(image, x - drawW/2, y - drawH/2, drawW, drawH);
        ctx.restore();
      }

      function poseOverlay(){
        ctx.globalAlpha = 0.08;
        ctx.strokeStyle = '#ffffff';
        ctx.lineWidth = 6;
        const pose = poseSel.value;
        ctx.beginPath();
        if(pose==='Walking'){ ctx.moveTo(w*0.55,h*0.2); ctx.lineTo(w*0.52,h*0.7); ctx.moveTo(w*0.45,h*0.4); ctx.lineTo(w*0.6,h*0.85); }
        else if(pose==='Sitting'){ ctx.rect(w*0.35,h*0.6,w*0.3,h*0.1); ctx.moveTo(w*0.5,h*0.3); ctx.lineTo(w*0.45,h*0.6); }
        else if(pose==='Leaning'){ ctx.moveTo(w*0.55,h*0.25); ctx.lineTo(w*0.45,h*0.75); }
        else if(pose==='Turning'){ ctx.arc(w*0.5,h*0.5,120,Math.PI*0.1,Math.PI*1.6); }
        else { ctx.moveTo(w*0.5,h*0.25); ctx.lineTo(w*0.5,h*0.8); }
        ctx.stroke();
        ctx.globalAlpha = 1;
      }

      function draw(){
        ctx.clearRect(0,0,w,h);
        bgPaint();
        if(outfitImg){
          // Fit outfit full height with padding
          const pad = 40;
          const scale = Math.min((w-2*pad)/outfitImg.width, (h-2*pad)/outfitImg.height);
          const dw = outfitImg.width*scale, dh = outfitImg.height*scale;
          ctx.drawImage(outfitImg, (w-dw)/2, (h-dh)/2, dw, dh);
        }
        if(faceImg){ drawMask(faceImg, faceX, faceY, faceScale); }
        poseOverlay();
        // shadow frame
        ctx.strokeStyle = 'rgba(255,255,255,0.08)'; ctx.lineWidth=8; ctx.strokeRect(8,8,w-16,h-16);
      }

      // generate is instant (on device)
      document.getElementById('generate-button').addEventListener('click', async ()=>{
        loading.classList.remove('hidden');
        setTimeout(()=>{ loading.classList.add('hidden'); draw(); }, 400);
      });

      document.getElementById('download-btn').addEventListener('click', ()=>{
        const a = document.createElement('a');
        a.href = stage.toDataURL('image/png');
        a.download = 'tryonnow-look.png';
        document.body.appendChild(a); a.click(); a.remove();
      });

      document.getElementById('share-btn').addEventListener('click', async ()=>{
        try {
          if (navigator.canShare && navigator.canShare({ files: [] })) {
            stage.toBlob(async (blob)=>{
              const file = new File([blob], 'tryonnow-look.png', { type: 'image/png' });
              await navigator.share({ title: 'My TryOnNow Look', text: 'Check out my AI-styled outfit!', files: [file] });
            });
          } else if (navigator.share) {
            await navigator.share({ title: 'My TryOnNow Look', text: 'Check out my AI-styled outfit!', url: stage.toDataURL('image/png') });
          } else {
            alert('Copy/save the image to share on socials.');
          }
        } catch(_) {}
      });

      // first paint
      draw();
    })();

    // --- Twinning Feature Logic (kept, demo) ---
    const twinningButtons = document.querySelectorAll('#twinning-feature .twinning-btn');
    const findTwinningBtn = document.getElementById('find-twinning-btn');
    const twinningButtonText = document.getElementById('twinning-button-text');
    const twinningLoadingIndicator = document.getElementById('twinning-loading-indicator');
    const person1OutfitImg = document.getElementById('person1-outfit');
    const person2OutfitImg = document.getElementById('person2-outfit');

    twinningButtons.forEach(button => {
      button.addEventListener('click', () => {
        twinningButtons.forEach(btn => btn.classList.remove('bg-indigo-500', 'hover:bg-indigo-600'));
        twinningButtons.forEach(btn => btn.classList.add('bg-gray-700', 'hover:bg-gray-600'));
        button.classList.remove('bg-gray-700', 'hover:bg-gray-600');
        button.classList.add('bg-indigo-500', 'hover:bg-indigo-600');
      });
    });

    findTwinningBtn.addEventListener('click', async () => {
      findTwinningBtn.disabled = true;
      twinningButtonText.textContent = 'Finding Matches...';
      twinningLoadingIndicator.classList.remove('hidden');

      setTimeout(() => {
        findTwinningBtn.disabled = false;
        twinningButtonText.textContent = 'Find Twinning Looks';
        twinningLoadingIndicator.classList.add('hidden');
        person1OutfitImg.src = `https://placehold.co/400x600/6366f1/white?text=Your+Look`;
        person2OutfitImg.src = `https://placehold.co/400x600/f43f5e/white?text=Partner's+Look`;
      }, 1500);
    });

    // Footer year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Contact form submission (backend-ready)
    const contactForm = document.getElementById('contact-form');
    if (contactForm) {
      const contactStatus = document.getElementById('contact-status');
      contactForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        const name = (document.getElementById('contact-name') || {}).value || '';
        const email = (document.getElementById('contact-email') || {}).value || '';
        const message = (document.getElementById('contact-message') || {}).value || '';
        contactStatus.textContent = 'Sending...';
        try {
          const res = await fetch(contactForm.action, { method: contactForm.method || 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ name, email, message }) });
          if (!res.ok) throw new Error('Bad response');
          contactStatus.textContent = "Thanks! We'll get back to you shortly.";
          contactForm.reset();
        } catch (err) {
          contactStatus.textContent = 'Could not send right now. Please try again or email us.';
        }
      });
    }

    // Ensure all images use native lazy-loading
    document.querySelectorAll('img:not([loading])').forEach(img => img.setAttribute('loading', 'lazy'));
  </script>
</body>
</html>
